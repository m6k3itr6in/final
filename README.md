# Система управления билетами
Добро пожаловать в систему управления билетами! Это приложение на основе Python позволяет пользователям регистрироваться, входить в систему и покупать билеты на фильмы и представления. Администраторы также могут добавлять билеты и управлять имеющимся запасом билетов.


## Функции
- Регистрация и вход в систему
- Выбор фильма и представления
- Покупка билетов
- Возможности администратора по добавлению билетов
- Просмотр истории покупок

## Описание классов

### 1. `User`

**Назначение**: Представляет пользователя системы управления билетами, позволяя пользователям просматривать свою историю покупок.

#### Атрибуты
- `login` (str): Имя пользователя.

#### Методы
- `__init__(self, login)`: Инициализирует объект `User` с указанным именем пользователя.

- `display_purchases(self)`: Читает файл `purchased_tickets.txt` для получения и отображения истории покупок пользователя.
  - **Функциональность**:
    - Открывает файл `purchased_tickets.txt` и читает его содержимое.
    - Фильтрует и отображает покупки, связанные с вошедшим в систему пользователем. Если нет найденных покупок, уведомляет пользователя.

---

### 2. `Events`

**Назначение**: Обрабатывает выбор и отображение доступных фильмов и мероприятий для продажи билетов.

#### Методы
- `__init__(self)`: Инициализирует класс `Events`.

- `event_selection(self)`: Запрашивает у пользователя выбор между фильмами и мероприятиями и отображает доступные варианты.
  - **Функциональность**:
    - Спрашивает пользователя, хочет ли он увидеть фильмы или мероприятия.
    - Читает из `films.txt` или `performances.txt`, чтобы перечислить доступные заголовки в зависимости от выбора пользователя.
    - Проверяет выбранный заголовок и выводит его детали или уведомляет, если он не найден.

---

### 3. `Ticket`

**Назначение**: Управляет процессами продажи билетов, включая добавление билетов, отображение доступных билетов и обработку покупок.

#### Методы
- `__init__(self)`: Инициализирует класс `Ticket`.

- `add_tickets(self)`: Позволяет администратору вводить доступные количество билетов для фильмов и мероприятий.
  - **Функциональность**:
    - Читает заголовки из `films.txt` и `performances.txt`, запрашивает у администратора количество билетов и сохраняет эти данные в `available_tickets.txt`.

- `save_ticket(self, title, amount)`: Сохраняет заголовок билета и его доступное количество в `available_tickets.txt`.
  - **Функциональность**: Добавляет заголовок билета и количество в указанном формате.

- `display_available_tickets(self)`: Отображает доступные билеты для покупки.
  - **Функциональность**:
    - Читает из `available_tickets.txt`, чтобы перечислить доступные заголовки вместе с информацией о доступности (Доступно или Распродано). Возвращает словарь доступных количеств билетов для дальнейших действий.

- `purchase_ticket(self, available, user_login)`: Обрабатывает покупку билетов для выбранного события пользователем.
  - **Функциональность**:
    - Запрашивает у пользователя заголовок билета, который он хочет купить, и проверяет его доступность.
    - Если все данные валидны, обрабатывает покупку, обновляет доступные билеты и записывает покупку в `purchased_tickets.txt`.

- `add_purchase(self, title, amount, user_login)`: Записывает покупку билета пользователя в `purchased_tickets.txt`.
  - **Функциональность**: Добавляет запись с именем пользователя, заголовком и количеством купленных билетов.

- `update_ticket_file(self, available)`: Обновляет файл `available_tickets.txt` с текущими данными о билетах.
  - **Функциональность**: Перезаписывает доступные билеты в файле на основе текущей инвентаризации.

---

### 4. `System`

**Назначение**: Управляет операциями пользовательских аккаунтов, такими как регистрация, вход в систему и обработка паролей.

#### Методы
- `__init__(self)`: Инициализирует класс `System`.

- `add_user(self, email, login, password, access)`: Добавляет нового пользователя в систему.
  - **Функциональность**:
    - Проверяет наличие существующих имен пользователей и адресов электронной почты. Если ни одно из них не существует, сохраняет данные пользователя в `users.txt`.

- `get_user(self, login, hash_password)`: Извлекает уровень доступа пользователя, проверяя учетные данные для входа.
  - **Функциональность**:
    - Ищет в `users.txt` совпадение имени пользователя и хэшированного пароля, возвращая уровень доступа пользователя, если совпадение найдено.

- `hash_password(self, text)`: Хэширует пароль с использованием SHA-256 для безопасного хранения.
  - **Функциональность**: Преобразует обычный текстовый пароль в его хэшированную форму.

- `register_admin(self)`: Регистрирует нового администратора через интерактивный ввод.
  - **Функциональность**:
    - Запрашивает необходимые учетные данные и проверяет формат электронной почты, затем вызывает `add_user` с доступом администратора.

- `register_user(self)`: Регистрирует нового обычного пользователя через интерактивный ввод.
  - **Функциональность**:
    - Запрашивает информацию у пользователя, удостоверяясь, что имя логина и пароль не совпадают, перед тем как вызвать `add_user`.

- `login_user(self)`: Обрабатывает вход пользователя, проверяя учетные данные.
  - **Функциональность**:
    - Запрашивает имя пользователя и пароль, валидирует их и возвращает информацию о пользователе и уровень доступа при успешном входе.

- `is_valid_email(self, email)`: Проверяет корректность формата электронной почты.
  - **Функциональность**: Проверяет наличие символов '@' и '.', возвращая `True`, если все корректно, в противном случае `False`.
